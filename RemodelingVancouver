// Let's create a standalone HTML file with the Vancouver market analysis visualization
// This will include all necessary libraries and be self-contained

const htmlContent = `<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vancouver Lower Mainland Renovation Market Analysis</title>
  
  <!-- React, ReactDOM, and Recharts libraries -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/17.0.2/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/17.0.2/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/recharts/2.1.12/Recharts.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.26.0/babel.min.js"></script>
  
  <!-- Tailwind CSS for styling -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background-color: #f5f7fa;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    @media print {
      .no-print {
        display: none;
      }
    }
  </style>
</head>
<body>
  <div id="root" class="container"></div>

  <script type="text/babel">
    // Destructure Recharts components for easier use
    const {
      BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer,
      PieChart, Pie, Cell, LineChart, Line, ScatterChart, Scatter, ZAxis,
      ComposedChart
    } = Recharts;
    
    // Main app component
    const VancouverMarketAnalysis = () => {
      const [activeTab, setActiveTab] = React.useState('population');
      const [language, setLanguage] = React.useState('en');
      
      // 1. Population distribution data
      const populationData = [
        { name: 'Vancouver', population: 675000 },
        { name: 'Surrey', population: 580000 },
        { name: 'Burnaby', population: 250000 },
        { name: 'Richmond', population: 220000 },
        { name: 'Coquitlam', population: 150000 },
        { name: 'Delta', population: 110000 },
        { name: 'North Vancouver', population: 90000 },
        { name: 'West Vancouver', population: 45000 }
      ];
      
      // 2. Home ownership rates data
      const ownershipRatesData = [
        { name: 'Metro Vancouver', rate: 62.1 },
        { name: 'Abbotsford-Mission', rate: 70.5 },
        { name: 'Squamish', rate: 69.4 },
        { name: 'Victoria', rate: 62.0 },
        { name: 'Rest of BC', rate: 71.0 }
      ];
      
      const ownershipByAgeData = [
        { age: '25 to 39', rate: 41.9 },
        { age: '40 to 54', rate: 64.6 },
        { age: '55 to 74', rate: 74.0 },
        { age: '75 and over', rate: 77.4 }
      ];
      
      // 3. Renovation spending data
      const renovationCostData = [
        { type: 'Kitchen', avgCost: 130000, lowCost: 75000, highCost: 185000 },
        { type: 'Bathroom', avgCost: 32500, lowCost: 15000, highCost: 50000 },
        { type: 'Basement', avgCost: 65000, lowCost: 35000, highCost: 95000 },
        { type: 'Exterior', avgCost: 85000, lowCost: 20000, highCost: 150000 },
        { type: 'Attic', avgCost: 40000, lowCost: 20000, highCost: 60000 },
        { type: 'Garage', avgCost: 50000, lowCost: 25000, highCost: 75000 },
        { type: 'Outdoor', avgCost: 55000, lowCost: 10000, highCost: 100000 },
        { type: 'Minor Updates', avgCost: 30000, lowCost: 10000, highCost: 50000 }
      ];
      
      const costPerSqftData = [
        { area: 'Vancouver', avgCost: 225, lowCost: 150, highCost: 300 },
        { area: 'West Vancouver', avgCost: 275, lowCost: 200, highCost: 350 },
        { area: 'North Vancouver', avgCost: 195, lowCost: 140, highCost: 250 },
        { area: 'Burnaby', avgCost: 200, lowCost: 150, highCost: 250 },
        { area: 'Richmond', avgCost: 200, lowCost: 150, highCost: 250 },
        { area: 'Delta', avgCost: 160, lowCost: 120, highCost: 200 },
        { area: 'Coquitlam', avgCost: 180, lowCost: 140, highCost: 220 }
      ];
      
      // 4. Market potential data
      const renovationSizeData = [
        { name: 'Major renovation ($100K+)', value: 20 },
        { name: 'Medium renovation ($50K-$100K)', value: 35 },
        { name: 'Minor renovation ($15K-$50K)', value: 30 },
        { name: 'Small updates (under $15K)', value: 15 }
      ];
      
      const marketByAreaData = [
        { area: 'Vancouver', value: 1567.7 },
        { area: 'Surrey', value: 1306.4 },
        { area: 'Burnaby', value: 627.1 },
        { area: 'Richmond', value: 522.6 },
        { area: 'Other Lower Mainland', value: 1201.9 }
      ];
      
      // 5. Competitive landscape data
      const competitiveData = [
        { name: 'General Contractors', marketShare: 30, avgProject: 85000, size: 85 },
        { name: 'Design-Build Firms', marketShare: 25, avgProject: 110000, size: 110 },
        { name: 'Specialized Renovation Companies', marketShare: 15, avgProject: 65000, size: 65 },
        { name: 'Kitchen & Bath Specialists', marketShare: 10, avgProject: 45000, size: 45 },
        { name: 'Independent Contractors', marketShare: 15, avgProject: 35000, size: 35 },
        { name: 'DIY/Owner-Builder', marketShare: 5, avgProject: 20000, size: 20 }
      ];
      
      const renovationTypesData = [
        { type: 'Kitchen', popularity: 9.5, roi: 70 },
        { type: 'Bathroom', popularity: 9.0, roi: 65 },
        { type: 'Whole Home', popularity: 6.5, roi: 55 },
        { type: 'Basement', popularity: 7.0, roi: 60 },
        { type: 'Exterior', popularity: 5.5, roi: 75 },
        { type: 'Addition', popularity: 4.8, roi: 50 },
        { type: 'Outdoor Space', popularity: 6.2, roi: 65 },
        { type: 'Garage', popularity: 3.8, roi: 40 }
      ];
      
      // Market summary data
      const marketSummary = {
        population: 2708000,
        households: 1083200,
        ownedHomes: 672667,
        annualProjects: 67266,
        avgProjectValue: 77687,
        totalMarketValue: 5225.7
      };
      
      // Spanish translations
      const translations = {
        en: {
          title: 'Vancouver Lower Mainland Renovation Market Analysis (2025)',
          tabs: {
            population: 'Population',
            ownership: 'Home Ownership',
            spending: 'Renovation Costs',
            market: 'Market Potential',
            competition: 'Competitive Landscape'
          },
          population: {
            title: 'Population Distribution in Lower Mainland Vancouver (2025)',
            yAxis: 'Population'
          },
          ownership: {
            title1: 'Home Ownership Rates in Lower Mainland and BC (2025)',
            title2: 'Home Ownership Rates by Age Group in Vancouver (2021)',
            yAxis: 'Ownership Rate (%)'
          },
          spending: {
            title1: 'Average Renovation Costs in Vancouver (2025)',
            title2: 'Average Renovation Cost per Square Foot by Area (2025)',
            yAxis1: 'Cost',
            yAxis2: 'Cost per Sq Ft'
          },
          market: {
            title1: 'Distribution of Renovation Projects by Size (2025)',
            title2: 'Estimated Annual Renovation Market Value by Area (2025)',
            summary: 'Market Analysis Summary',
            table: {
              population: 'Total Population',
              households: 'Estimated Households',
              ownedHomes: 'Owner-Occupied Homes',
              annualProjects: 'Annual Renovation Projects',
              avgProjectValue: 'Average Project Value',
              totalMarketValue: 'Total Market Value'
            },
            pieLabel: 'Market Share',
            barLabel: 'Market Value ($ millions)'
          },
          competition: {
            title1: 'Renovation Market Competitive Landscape (2025)',
            title2: 'Renovation Types: Popularity vs. Return on Investment (2025)',
            scatterName: 'Market Share & Avg Project Size',
            avgProject: 'Avg Project Value',
            marketShare: 'Market Share',
            barName: 'Popularity Score',
            lineName: 'ROI (%)',
            yAxis1: 'Popularity Score (1-10)',
            yAxis2: 'ROI (%)'
          },
          conclusion: {
            title: 'Conclusion',
            p1: 'The Vancouver Lower Mainland represents a significant market opportunity for residential renovation businesses. With over 2.7 million residents, a 62.1% home ownership rate, and robust renovation spending, the market shows strong potential for new entrants.',
            p2: 'The opportunity is particularly strong in Vancouver and Surrey, which together represent approximately 55% of the total renovation market value.',
            p3: 'Key focus areas with the highest ROI and popularity include kitchen and bathroom renovations, while exterior renovations offer the highest potential return on investment.',
            p4: 'For a new business entering this market, competitive positioning is crucial. Design-Build firms command higher average project values, while the general contractor segment represents the largest market share, indicating potential opportunities in both sectors.'
          },
          print: 'Print Report'
        },
        es: {
          title: 'Análisis del Mercado de Renovaciones de Vancouver - Área Metropolitana (2025)',
          tabs: {
            population: 'Población',
            ownership: 'Propiedad de Vivienda',
            spending: 'Costos de Renovación',
            market: 'Potencial de Mercado',
            competition: 'Panorama Competitivo'
          },
          population: {
            title: 'Distribución de Población en el Área Metropolitana de Vancouver (2025)',
            yAxis: 'Población'
          },
          ownership: {
            title1: 'Tasas de Propiedad de Vivienda en Vancouver y BC (2025)',
            title2: 'Tasas de Propiedad de Vivienda por Grupo de Edad en Vancouver (2021)',
            yAxis: 'Tasa de Propiedad (%)'
          },
          spending: {
            title1: 'Costos Promedio de Renovación en Vancouver (2025)',
            title2: 'Costo Promedio de Renovación por Pie Cuadrado por Área (2025)',
            yAxis1: 'Costo',
            yAxis2: 'Costo por Pie Cuadrado'
          },
          market: {
            title1: 'Distribución de Proyectos de Renovación por Tamaño (2025)',
            title2: 'Valor Estimado del Mercado Anual de Renovación por Área (2025)',
            summary: 'Resumen del Análisis de Mercado',
            table: {
              population: 'Población Total',
              households: 'Hogares Estimados',
              ownedHomes: 'Viviendas en Propiedad',
              annualProjects: 'Proyectos de Renovación Anuales',
              avgProjectValue: 'Valor Promedio del Proyecto',
              totalMarketValue: 'Valor Total del Mercado'
            },
            pieLabel: 'Cuota de Mercado',
            barLabel: 'Valor del Mercado ($ millones)'
          },
          competition: {
            title1: 'Panorama Competitivo del Mercado de Renovaciones (2025)',
            title2: 'Tipos de Renovación: Popularidad vs. Retorno de Inversión (2025)',
            scatterName: 'Cuota de Mercado y Tamaño Promedio de Proyecto',
            avgProject: 'Valor Promedio de Proyecto',
            marketShare: 'Cuota de Mercado',
            barName: 'Puntuación de Popularidad',
            lineName: 'ROI (%)',
            yAxis1: 'Puntuación de Popularidad (1-10)',
            yAxis2: 'ROI (%)'
          },
          conclusion: {
            title: 'Conclusión',
            p1: 'El área metropolitana de Vancouver representa una oportunidad significativa para negocios de renovación residencial. Con más de 2,7 millones de residentes, una tasa de propiedad de vivienda del 62,1% y un gasto robusto en renovaciones, el mercado muestra un fuerte potencial para nuevos participantes.',
            p2: 'La oportunidad es particularmente fuerte en Vancouver y Surrey, que juntos representan aproximadamente el 55% del valor total del mercado de renovación.',
            p3: 'Las áreas clave con el ROI y popularidad más altos incluyen renovaciones de cocina y baño, mientras que las renovaciones exteriores ofrecen el mayor retorno potencial de inversión.',
            p4: 'Para un nuevo negocio que ingrese a este mercado, el posicionamiento competitivo es crucial. Las empresas de Diseño-Construcción tienen valores de proyecto promedio más altos, mientras que el segmento de contratistas generales representa la mayor cuota de mercado, indicando potenciales oportunidades en ambos sectores.'
          },
          print: 'Imprimir Informe'
        }
      };
      
      // Colors
      const COLORS = ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072', '#80b1d3', '#fdb462', '#b3de69', '#fccde5'];
      
      // Format numbers as currency
      const formatCurrency = (value) => {
        if (value >= 1000000) {
          return \`$\${(value / 1000000).toFixed(1)}M\`;
        } else if (value >= 1000) {
          return \`$\${(value / 1000).toFixed(0)}K\`;
        } else {
          return \`$\${value}\`;
        }
      };
      
      // Format large numbers with commas
      const formatNumber = (value) => {
        return value.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ",");
      };
      
      // Get current translations based on selected language
      const t = translations[language];
      
      return (
        <div className="bg-gray-50 p-6 rounded-lg">
          <div className="flex justify-between items-center mb-6">
            <h1 className="text-3xl font-bold text-blue-800">
              {t.title}
            </h1>
            <div className="flex space-x-4">
              <select 
                className="px-3 py-2 border rounded-md"
                value={language}
                onChange={(e) => setLanguage(e.target.value)}
              >
                <option value="en">English</option>
                <option value="es">Español</option>
              </select>
              <button 
                className="bg-blue-600 text-white px-4 py-2 rounded-md no-print"
                onClick={() => window.print()}
              >
                {t.print}
              </button>
            </div>
          </div>
          
          <div className="mb-6">
            <div className="flex flex-wrap gap-2 mb-4 justify-center no-print">
              <button
                className={\`px-4 py-2 rounded-md \${activeTab === 'population' ? 'bg-blue-600 text-white' : 'bg-gray-200'}\`}
                onClick={() => setActiveTab('population')}
              >
                {t.tabs.population}
              </button>
              <button
                className={\`px-4 py-2 rounded-md \${activeTab === 'ownership' ? 'bg-blue-600 text-white' : 'bg-gray-200'}\`}
                onClick={() => setActiveTab('ownership')}
              >
                {t.tabs.ownership}
              </button>
              <button
                className={\`px-4 py-2 rounded-md \${activeTab === 'spending' ? 'bg-blue-600 text-white' : 'bg-gray-200'}\`}
                onClick={() => setActiveTab('spending')}
              >
                {t.tabs.spending}
              </button>
              <button
                className={\`px-4 py-2 rounded-md \${activeTab === 'market' ? 'bg-blue-600 text-white' : 'bg-gray-200'}\`}
                onClick={() => setActiveTab('market')}
              >
                {t.tabs.market}
              </button>
              <button
                className={\`px-4 py-2 rounded-md \${activeTab === 'competition' ? 'bg-blue-600 text-white' : 'bg-gray-200'}\`}
                onClick={() => setActiveTab('competition')}
              >
                {t.tabs.competition}
              </button>
            </div>
            
            {/* Population chart */}
            <div className={\`bg-white p-4 rounded-lg shadow mb-6 \${activeTab === 'population' ? '' : 'hidden print:block'}\`}>
              <h2 className="text-xl font-semibold mb-4">{t.population.title}</h2>
              <div style={{ width: '100%', height: 400 }}>
                <ResponsiveContainer>
                  <BarChart data={populationData} margin={{ top: 20, right: 30, left: 20, bottom: 50 }}>
                    <CartesianGrid strokeDasharray="3 3" />
                    <XAxis dataKey="name" angle={-45} textAnchor="end" height={60} />
                    <YAxis tickFormatter={(value) => \`\${value/1000}K\`} />
                    <Tooltip formatter={(value) => [\`\${formatNumber(value)}\`, t.population.yAxis]} />
                    <Legend />
                    <Bar dataKey="population" fill="#8884d8" name={t.population.yAxis}>
                      {populationData.map((entry, index) => (
                        <Cell key={\`cell-\${index}\`} fill={COLORS[index % COLORS.length]} />
                      ))}
                    </Bar>
                  </BarChart>
                </ResponsiveContainer>
              </div>
            </div>
            
            {/* Home ownership charts */}
            <div className={\`bg-white p-4 rounded-lg shadow mb-6 \${activeTab === 'ownership' ? '' : 'hidden print:block'}\`}>
              <div className="mb-8">
                <h2 className="text-xl font-semibold mb-4">{t.ownership.title1}</h2>
                <div style={{ width: '100%', height: 300 }}>
                  <ResponsiveContainer>
                    <BarChart data={ownershipRatesData} margin={{ top: 20, right: 30, left: 20, bottom: 50 }}>
                      <CartesianGrid strokeDasharray="3 3" />
                      <XAxis dataKey="name" angle={-45} textAnchor="end" height={60} />
                      <YAxis domain={[0, 80]} />
                      <Tooltip formatter={(value) => [\`\${value.toFixed(1)}%\`, t.ownership.yAxis]} />
                      <Legend />
                      <Bar dataKey="rate" fill="#82ca9d" name={t.ownership.yAxis}>
                        {ownershipRatesData.map((entry, index) => (
                          <Cell key={\`cell-\${index}\`} fill={COLORS[index % COLORS.length]} />
                        ))}
                      </Bar>
                    </BarChart>
                  </ResponsiveContainer>
                </div>
              </div>
              
              <div>
                <h2 className="text-xl font-semibold mb-4">{t.ownership.title2}</h2>
                <div style={{ width: '100%', height: 300 }}>
                  <ResponsiveContainer>
                    <BarChart data={ownershipByAgeData} margin={{ top: 20, right: 30, left: 20, bottom: 5 }}>
                      <CartesianGrid strokeDasharray="3 3" />
                      <XAxis dataKey="age" />
                      <YAxis domain={[0, 80]} />
                      <Tooltip formatter={(value) => [\`\${value.toFixed(1)}%\`, t.ownership.yAxis]} />
                      <Legend />
                      <Bar dataKey="rate" fill="#8884d8" name={t.ownership.yAxis}>
                        {ownershipByAgeData.map((entry, index) => (
                          <Cell key={\`cell-\${index}\`} fill={COLORS[index % COLORS.length]} />
                        ))}
                      </Bar>
                    </BarChart>
                  </ResponsiveContainer>
                </div>
              </div>
            </div>
            
            {/* Renovation costs charts */}
            <div className={\`bg-white p-4 rounded-lg shadow mb-6 \${activeTab === 'spending' ? '' : 'hidden print:block'}\`}>
              <div className="mb-8">
                <h2 className="text-xl font-semibold mb-4">{t.spending.title1}</h2>
                <div style={{ width: '100%', height: 400 }}>
                  <ResponsiveContainer>
            
